<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.2">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2023-08-14T19:52:29+09:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">Arte Moderni ê¸°ìˆ ë¸”ë¡œê·¸</title><subtitle>ìš°ë¦¬ FISì™€ ê¸€ë¡œë²Œì†Œí”„íŠ¸ì›¨ì–´ ìº í¼ìŠ¤ê°€ í•¨ê»˜í•˜ëŠ” &quot;ìš°ë¦¬ FISA - í´ë¼ìš°ë“œ ì—”ì§€ë‹ˆì–´ë§&quot; íŒŒì´ë„ í”„ë¡œì íŠ¸ 6íŒ€ì˜ ê¸°ìˆ ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ê¸°ìˆ  ì§€ì‹ì— ëŒ€í•œ íƒêµ¬ì™€ í•™ìŠµ ê·¸ë¦¬ê³  í”„ë¡œì íŠ¸ ì§„í–‰ìƒí™©ì„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</subtitle><author><name>í´ë¼ìš°ë“œ ì—”ì§€ë‹ˆì–´ë§ 6íŒ€</name></author><entry><title type="html">ê¸°ìˆ  ë¸”ë¡œê·¸ë¥¼ ê°œì„¤í–ˆìŠµë‹ˆë‹¤!</title><link href="http://localhost:4000/%EB%B8%94%EB%A1%9C%EA%B7%B8/2023/08/13/post01.html" rel="alternate" type="text/html" title="ê¸°ìˆ  ë¸”ë¡œê·¸ë¥¼ ê°œì„¤í–ˆìŠµë‹ˆë‹¤!" /><published>2023-08-13T00:00:00+09:00</published><updated>2023-08-13T00:00:00+09:00</updated><id>http://localhost:4000/%EB%B8%94%EB%A1%9C%EA%B7%B8/2023/08/13/post01</id><content type="html" xml:base="http://localhost:4000/%EB%B8%94%EB%A1%9C%EA%B7%B8/2023/08/13/post01.html"><![CDATA[<h2 id="-ì²«-í¬ìŠ¤íŒ…">ğŸ˜€ ì²« í¬ìŠ¤íŒ…</h2>

<p>ì•ˆë…•í•˜ì„¸ìš”! 6íŒ€ì˜ PM ê¹€ì§€ìš´ì…ë‹ˆë‹¤ğŸ§‘ğŸ»â€ğŸ’»<br />
<br />
ìš°ë¦¬ì€í–‰ê³¼ ê¸€ë¡œë²Œ ì†Œí”„íŠ¸ì›¨ì–´ ìº í¼ìŠ¤ê°€ ì£¼ê´€í•˜ëŠ” â€œìš°ë¦¬ FISA 1ê¸° - í´ë¼ìš°ë“œ ì—”ì§€ë‹ˆì–´ë§â€ì˜ ì—¬ì„¯ ë²ˆì§¸ íŒ€. íŒ€ F4ì˜ ê¸°ìˆ  ë¸”ë¡œê·¸ë¥¼ ê°œì„¤í–ˆìŠµë‹ˆë‹¤.<br />
<br />
ì €í¬ íŒ€ì€ í”„ë¡ íŠ¸ì—”ë“œë¶€í„° ì¸í”„ë¼(í¼ë¸”ë¦­ í´ë¼ìš°ë“œ &amp; ì˜¨í”„ë ˆë¯¸ìŠ¤)ì— ëŒ€í•œ ì§€ì‹ì„ í•™ìŠµí•˜ê³  ì‚¬ìš©í•¨ìœ¼ë¡œì¨ ê°œë°œì˜ A-Z í”„ë¡œì„¸ìŠ¤ë¥¼ ì´í•´í•˜ë ¤ ë…¸ë ¥í•©ë‹ˆë‹¤.<br />
<br />
ì €í¬ì˜ ì§€ì‹ íƒêµ¬ì— ëŒ€í•œ ë‚´ìš©ì„ ë§ì€ ì‚¬ëŒë“¤ê³¼ ê³µìœ í•˜ê³  ë…¼ì˜í•˜ê¸° ìœ„í•´ ë¸”ë¡œê·¸ë¥¼ ê°œì„¤í•˜ì˜€ìŠµë‹ˆë‹¤. ì¶”ê°€ì ìœ¼ë¡œ ì´ëŸ¬í•œ í•™ìŠµ ë‚´ìš©ë“¤ì´ íŒŒì´ë„ í”„ë¡œì íŠ¸ì—ëŠ” ì–´ë–»ê²Œ ë…¹ì•„ë“¤ì—ˆëŠ”ì§€ ë³´ì—¬ë“œë¦¬ë ¤ í•©ë‹ˆë‹¤. ì£¼ë§ˆë‹¤ ì˜¬ë¼ì˜¬ ì €ì™€ íŒ€ì›ë“¤ì˜ í¬ìŠ¤íŒ…ì„ ê´€ì‹¬ìˆê²Œ ì§€ì¼œë´ ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤!</p>

<h3 id="í”„ë¡œì íŠ¸-ê°„ë‹¨-ì†Œê°œ">í”„ë¡œì íŠ¸ ê°„ë‹¨ ì†Œê°œ</h3>

<p>ì €í¬íŒ€ì€ ì„œë²„ ë¬¸ì œ ë°œìƒìœ¼ë¡œ ì„œë¹„ìŠ¤ë“¤ì´ ì¥ì• ê°€ ë°œìƒí•˜ëŠ” ì›ì¸ì„ í•´ê²°í•˜ê³ ì í•˜ì˜€ê³ , ì „ì ìƒê±°ë˜ ì„œë¹„ìŠ¤ê°€ ì €í¬ì˜ ì†”ë£¨ì…˜ì„ í…ŒìŠ¤íŠ¸ í•´ë³´ê¸° ì¢‹ì€ ì£¼ì œë¼ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, â€œë¯¸ìˆ í’ˆ ê²½ë§¤ ê±°ë˜ ì‚¬ì´íŠ¸â€ë¼ëŠ” ì£¼ì œë¡œ â€œì‹¤ì‹œê°„ ê²½ë§¤â€, â€œë¯¸ìˆ í’ˆ êµ¬ë§¤â€ì™€ ê°™ì€ ë‘ê°€ì§€ í•µì‹¬ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê³ , ì„œë²„ ì´ì¤‘í™”ì™€ ì„œë¹„ìŠ¤ ì‚¬ìš©ëŸ‰ì— ë”°ë¥¸ ì¸í”„ë¼ ê´€ë¦¬ ê·¸ë¦¬ê³  ë°±ì—”ë“œì—ì„œì˜ íŠ¸ë˜í”½ ë¶„ì‚° ë“±ì„ ì ìš©í•´ë³¼ ê³„íšì…ë‹ˆë‹¤.</p>]]></content><author><name>ê¹€ì§€ìš´</name></author><category term="ë¸”ë¡œê·¸" /><category term="blog" /><category term="project" /><summary type="html"><![CDATA[ğŸ˜€ ì²« í¬ìŠ¤íŒ…]]></summary></entry><entry><title type="html">ReplyingKafkaTemplate ì˜ˆì œ ë§Œë“¤ì–´ë³´ê¸°</title><link href="http://localhost:4000/%EB%B8%94%EB%A1%9C%EA%B7%B8/2023/08/13/post02.html" rel="alternate" type="text/html" title="ReplyingKafkaTemplate ì˜ˆì œ ë§Œë“¤ì–´ë³´ê¸°" /><published>2023-08-13T00:00:00+09:00</published><updated>2023-08-13T00:00:00+09:00</updated><id>http://localhost:4000/%EB%B8%94%EB%A1%9C%EA%B7%B8/2023/08/13/post02</id><content type="html" xml:base="http://localhost:4000/%EB%B8%94%EB%A1%9C%EA%B7%B8/2023/08/13/post02.html"><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” F4íŒ€ì˜ í˜ì”ë””ì…ë‹ˆë‹¤. Kafkaë¥¼ í™œìš©í•œ í”„ë¡œì íŠ¸ë¥¼ ì„¤ê³„í•˜ë©´ì„œ <b>Clientì˜ ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì„ Kafkaë¡œ ì–´ë–»ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆì„ê¹Œ</b>ì— ëŒ€í•œ ê¶ê¸ˆì¦ì´ ìƒê²¨ ê´€ë ¨ ìë£Œë¥¼ ì°¾ì•„ë³´ì•˜ê³  ì´í•´ë¥¼ ìœ„í•´ ê°„ë‹¨í•œ ì˜ˆì œë¥¼ ë§Œë“¤ì–´ë³´ì•˜ìŠµë‹ˆë‹¤.</p>

<h2 id="ì˜ˆì œ-ê°„ë‹¨-ì†Œê°œ">ì˜ˆì œ ê°„ë‹¨ ì†Œê°œ</h2>

<p>Databaseì— User, Order í…Œì´ë¸” ì¡´ì¬<br />
User í…Œì´ë¸”ì—ëŠ” UserIdì™€ Money(ë³´ìœ í•œ ê¸ˆì•¡)ì´ ì¡´ì¬<br />
Order í…Œì´ë¸”ì—ëŠ” UserId, Paid(ê²°ì œ ê¸ˆì•¡), Result(ê²°ê³¼) ì¡´ì¬<br />
Userê°€ ê²°ì œ ê¸ˆì•¡ì„ ìš”ì²­í–ˆì„ ë•Œ ë³´ìœ  ê¸ˆì•¡ì´ ê²°ì œ ê¸ˆì•¡ë³´ë‹¤ í¬ê±°ë‚˜ ê°™ì€ ê²½ìš° â€œì„±ê³µí–ˆìŠµë‹ˆë‹¤.â€ ë°˜í™˜ë°›ê³ <br />
ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš° â€œì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.â€ ë°˜í™˜ë°›ìŒ<br /></p>

<h2 id="apache-kafkaë¥¼-ì‚¬ìš©í•œ-ë™ê¸°ì‹-ìš”ì²­-ì‘ë‹µ">Apache Kafkaë¥¼ ì‚¬ìš©í•œ ë™ê¸°ì‹ ìš”ì²­-ì‘ë‹µ</h2>

<p>Apache KafkaëŠ” ìŠ¤íŠ¸ë¦¬ë° ë°ì´í„°ì™€ ë‹¤ì–‘í•œ ìƒì‚°ìì™€ ì†Œë¹„ì ê°„ì˜ ë””ì»¤í”Œë§ì„ ìœ„í•´ êµ¬ì¶•ë˜ì—ˆê¸° ë•Œë¬¸ì— ì •ë§ í•„ìš”í•œ ìƒí™©ì´ ì•„ë‹ˆë©´ Kafkaì™€ ìš”ì²­-ì‘ë‹µ ê°œë…ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.<br />
í•˜ì§€ë§Œ í•„ìš”í•œ ìƒí™©ì—ì„œëŠ” Spring kafka í…œí”Œë¦¿ì„ ì‚¬ìš©í•˜ì—¬ ë™ê¸°ì‹ ìš”ì²­-ì‘ë‹µì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br />
ê°„ë‹¨í•œ ì˜ˆì œë¥¼ í†µí•´ ì‚¬ìš© ë°©ë²•ì„ ìµí˜€ë³´ì•˜ìŠµë‹ˆë‹¤.<br />
<br />
<img src="https://github.com/wooriFisa-Final-Project-F4/wooriFisa-Final-Project-F4.github.io/assets/119636839/0352eced-733b-4f58-a3ab-2e7031c32613" alt="flow" />
<br />
PostManì„ í†µí•´ Controllerì— JSONíƒ€ì…ìœ¼ë¡œ ìš”ì²­ì„ ë³´ë‚´ë©´<br />
Controllerì—ì„œ ProducerRecordë¥¼ í†µí•´ í—¤ë”ì— Reply_Topicì„ â€œorderâ€ë¡œ ì„¤ì •í•´ ì£¼ê³  â€œuserâ€ topicì— ì´ë²¤íŠ¸ ë°œí–‰<br />
â€œuserâ€ topicì„ êµ¬ë…í•˜ë˜ Consumerì—ì„œ ê°„ë‹¨í•œ ë¡œì§ ì²˜ë¦¬ í›„ @SendToì— ì˜í•´ í—¤ë”ì— ìˆëŠ” Reply_Topicì— ê²°ê³¼ ë°˜í™˜<br />
Controllerì—ì„œ ConsumerRecordë¥¼ í†µí•´ ê²°ê³¼ê°’ ë°›ì€ í›„ Clientì— ë°˜í™˜</p>

<h3 id="controller">Controller</h3>

<pre><code class="language-Java">@PostMapping(value="/order",produces=MediaType.APPLICATION_JSON_VALUE,consumes=MediaType.APPLICATION_JSON_VALUE)
	public String sum(@RequestBody OrderEntity request) throws InterruptedException, ExecutionException {
		// create producer record
		ProducerRecord&lt;String, OrderEntity&gt; record = new ProducerRecord&lt;String, OrderEntity&gt;(requestTopic, request);
		// set reply topic in header
		record.headers().add(new RecordHeader(KafkaHeaders.REPLY_TOPIC, requestReplyTopic.getBytes()));
		// post in kafka topic
		RequestReplyFuture&lt;String, OrderEntity, OrderEntity&gt; sendAndReceive = kafkaTemplate.sendAndReceive(record);

		// confirm if producer produced successfully
		SendResult&lt;String, OrderEntity&gt; sendResult = sendAndReceive.getSendFuture().get();
		
		//print all headers
		sendResult.getProducerRecord().headers().forEach(header -&gt; System.out.println(header.key() + ":" + header.value().toString()));
		// get consumer record
		ConsumerRecord&lt;String, OrderEntity&gt; consumerRecord = sendAndReceive.get();
		
		// return consumer value
		return consumerRecord.value().getResult();
	}
</code></pre>

<h3 id="consumer">Consumer</h3>

<pre><code class="language-Java">@KafkaListener(topics = "${kafka.topic.request-topic}")
	@SendTo
	public OrderEntity listen(OrderEntity request) throws InterruptedException {
		if(uRepository.findById(request.getUserId()).isPresent()) {
			UserEntity user = uRepository.findById(request.getUserId()).get();
			if(user.getMoney() &lt; request.getPaid()) {
				request.setResult("Failure");
			}else {
				user.setMoney(user.getMoney()-request.getPaid());
				request.setResult("Success");
			}
			uRepository.save(user);
			oRepository.save(request);
			return request;
		}else {
			request.setResult("ì—†ëŠ” ì‚¬ìš©ì");
			return request;
		}
	}
</code></pre>

<p><br /><br /></p>
<h2 id="git">Git</h2>
<p>Configuration ë“± ì„¤ì •ì´ë‚˜ ì „ì²´ ì½”ë“œëŠ” <br />
https://github.com/rlagurnws/kafkatest.git v2.1 tagì—ì„œ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>]]></content><author><name>ê¹€í˜ì¤€</name></author><category term="ë¸”ë¡œê·¸" /><category term="blog" /><category term="kafka" /><summary type="html"><![CDATA[ì•ˆë…•í•˜ì„¸ìš” F4íŒ€ì˜ í˜ì”ë””ì…ë‹ˆë‹¤. Kafkaë¥¼ í™œìš©í•œ í”„ë¡œì íŠ¸ë¥¼ ì„¤ê³„í•˜ë©´ì„œ Clientì˜ ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì„ Kafkaë¡œ ì–´ë–»ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆì„ê¹Œì— ëŒ€í•œ ê¶ê¸ˆì¦ì´ ìƒê²¨ ê´€ë ¨ ìë£Œë¥¼ ì°¾ì•„ë³´ì•˜ê³  ì´í•´ë¥¼ ìœ„í•´ ê°„ë‹¨í•œ ì˜ˆì œë¥¼ ë§Œë“¤ì–´ë³´ì•˜ìŠµë‹ˆë‹¤.]]></summary></entry></feed>